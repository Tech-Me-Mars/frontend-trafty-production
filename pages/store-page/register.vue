<script setup>
import { ref } from 'vue'
import { useForm, useField } from 'vee-validate'
import * as yup from 'yup'
const router = useRouter();
// ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö tab
const activeTab = ref(0)
const isloadingAxi = useState('isloadingAxi')


// üéØ ‡∏™‡∏£‡πâ‡∏≤‡∏á schema ‡∏î‡πâ‡∏ß‡∏¢ yup
const schema = yup.object({
    name: yup.string().required('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•'),
    email: yup.string().email('‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á').required('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•'),
    username: yup.string().required('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'),
    password: yup.string().min(6, '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß').required('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô')
})

// üéØ ‡πÉ‡∏ä‡πâ useForm ‡∏à‡∏≤‡∏Å vee-validate
const { handleSubmit } = useForm({
    validationSchema: schema
})

// üéØ ‡∏ú‡∏π‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞ field
const { value: name, errorMessage: nameError } = useField('name')
const { value: email, errorMessage: emailError } = useField('email')
const { value: username, errorMessage: usernameError } = useField('username')
const { value: password, errorMessage: passwordError } = useField('password')

// üéØ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
const submit = handleSubmit(values => {
    isloadingAxi.value = true
    console.log('Submitted:', values)
    setTimeout(() => {
        isloadingAxi.value = false
        alert('‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à')
    }, 1500)
})
</script>

<style>
.van-nav-bar {
    --van-nav-bar-background: #281c74;
    --van-nav-bar-text-color: white;
    --van-nav-bar-icon-color: white;
    --van-nav-bar-title-text-color: white;
    --van-nav-bar-height: 70px;
}
</style>

<template>

    <div class="min-h-screen bg-zinc pb-24">
        <van-nav-bar title="‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß" left-arrow @click-left="router.go(-1)" />

        <van-tabs v-model:active="activeTab" line-width="40" color="#1E3A8A" title-active-color="#1E3A8A"
            class="shadow-sm">
            <van-tab title="‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß">
                <form @submit.prevent="submit">
                    <div class="bg-white rounded-lg shadow-sm p-6 mx-4 mt-4 space-y-4">
                        <h2 class="text-lg font-bold text-gray-800">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</h2>

                        <!-- Name -->
                        <div>
                            <InputText v-model="name" class="w-full custom-border" placeholder="‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" />
                            <small class="text-red-500 text-sm">{{ nameError }}</small>
                        </div>

                        <!-- Email -->
                        <div>
                            <InputText v-model="email" class="w-full custom-border" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" />
                            <small class="text-red-500 text-sm">{{ emailError }}</small>
                        </div>

                        <!-- Username -->
                        <div>
                            <InputText v-model="username" class="w-full custom-border" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" />
                            <small class="text-red-500 text-sm">{{ usernameError }}</small>
                        </div>

                        <!-- Password -->
                        <div>
                            <Password type="password" v-model="password" class="w-full" inputClass="custom-border !w-full"
                                placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" :feedback="false"  />
                            <small class="text-red-500 text-sm">{{ passwordError }}</small>
                        </div>
                    </div>

                    <!-- Register Button -->
                    <div class="flex justify-center mt-4 px-4">
                        <Button :loading="isloadingAxi" label="‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô" type="submit" severity="primary" rounded
                            class="w-full max-w-md" :pt="{ root: { class: '!border-primary-main' } }" />
                    </div>
                </form>
            </van-tab>

            <van-tab title="‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£">
                <div class="p-6 text-center text-gray-500">
                    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£
                </div>
            </van-tab>
        </van-tabs>


    </div>

</template>
